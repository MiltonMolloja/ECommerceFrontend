<div class="layout-container">
  <!-- Header Principal - Amazon Style -->
  <header class="main-header">
    <!-- Primera fila: Logo, Búsqueda, Cuenta, Carrito -->
    <mat-toolbar class="top-toolbar">
      <div class="header-content">
        <!-- Logo -->
        <a routerLink="/" class="logo">
          <mat-icon class="logo-icon">shopping_bag</mat-icon>
          <span class="logo-text hide-xs">ECommerce</span>
        </a>

        <!-- Barra de búsqueda con autocomplete -->
        <app-search-bar class="search-bar-wrapper"></app-search-bar>

        <!-- Acciones de header -->
        <div class="header-actions">
          <!-- Cuenta y listas -->
          <button mat-button class="account-button hide-xs" [matMenuTriggerFor]="accountMenu">
            <div class="account-info">
              <span class="account-greeting">Hola, {{ userFirstName() }}</span>
              <span class="account-label">Cuenta y Listas</span>
            </div>
          </button>
          <mat-menu #accountMenu="matMenu">
            <button mat-menu-item routerLink="/login">
              <mat-icon>login</mat-icon>
              <span>Iniciar Sesión</span>
            </button>
            <button mat-menu-item routerLink="/orders">
              <mat-icon>receipt_long</mat-icon>
              <span>Mis Órdenes</span>
            </button>
          </mat-menu>

          <!-- Solo icono de usuario en móvil -->
          <button mat-icon-button class="hide-gt-xs" routerLink="/login">
            <mat-icon>account_circle</mat-icon>
          </button>

          <!-- Language Switcher -->
          <app-language-switcher></app-language-switcher>

          <!-- Selector de Tema -->
          <button mat-button class="theme-button hide-xs" [matMenuTriggerFor]="themeMenu">
            <div class="account-info">
              <span class="account-greeting">{{ 'THEME.THEME_SETTINGS' | translate }}</span>
              <span class="account-label">{{ themeService.getThemeLabel() }}</span>
            </div>
          </button>
          <mat-menu #themeMenu="matMenu">
            <button
              mat-menu-item
              (click)="setTheme('light')"
              [class.active]="themeService.themeMode() === 'light'"
            >
              <mat-icon>light_mode</mat-icon>
              <span>{{ 'THEME.LIGHT' | translate }}</span>
            </button>
            <button
              mat-menu-item
              (click)="setTheme('dark')"
              [class.active]="themeService.themeMode() === 'dark'"
            >
              <mat-icon>dark_mode</mat-icon>
              <span>{{ 'THEME.DARK' | translate }}</span>
            </button>
            <button
              mat-menu-item
              (click)="setTheme('auto')"
              [class.active]="themeService.themeMode() === 'auto'"
            >
              <mat-icon>brightness_auto</mat-icon>
              <span>{{ 'THEME.AUTO' | translate }}</span>
            </button>
          </mat-menu>

          <!-- Icono de tema en móvil -->
          <button mat-icon-button class="hide-gt-xs" [matMenuTriggerFor]="themeMobileMenu">
            <mat-icon>{{ themeService.getThemeIcon() }}</mat-icon>
          </button>
          <mat-menu #themeMobileMenu="matMenu">
            <button
              mat-menu-item
              (click)="setTheme('light')"
              [class.active]="themeService.themeMode() === 'light'"
            >
              <mat-icon>light_mode</mat-icon>
              <span>Claro</span>
            </button>
            <button
              mat-menu-item
              (click)="setTheme('dark')"
              [class.active]="themeService.themeMode() === 'dark'"
            >
              <mat-icon>dark_mode</mat-icon>
              <span>Oscuro</span>
            </button>
            <button
              mat-menu-item
              (click)="setTheme('auto')"
              [class.active]="themeService.themeMode() === 'auto'"
            >
              <mat-icon>brightness_auto</mat-icon>
              <span>{{ 'THEME.AUTO' | translate }}</span>
            </button>
          </mat-menu>

          <!-- Carrito (Estilo Amazon - Verde con contador naranja) -->
          <a routerLink="/cart" class="cart-button-amazon">
            <div class="cart-icon-wrapper">
              <span class="cart-count-badge">{{ cartItemCount() }}</span>
              <svg class="cart-svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 18C5.9 18 5.01 18.9 5.01 20C5.01 21.1 5.9 22 7 22C8.1 22 9 21.1 9 20C9 18.9 8.1 18 7 18ZM1 2V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.1 5.9 17 7 17H19V15H7.42C7.28 15 7.17 14.89 7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L20.88 5.48C20.96 5.34 21 5.17 21 5C21 4.45 20.55 4 20 4H5.21L4.27 2H1ZM17 18C15.9 18 15.01 18.9 15.01 20C15.01 21.1 15.9 22 17 22C18.1 22 19 21.1 19 20C19 18.9 18.1 18 17 18Z" fill="currentColor"/>
              </svg>
            </div>
            <span class="cart-text-label">Carrito</span>
          </a>
        </div>
      </div>
    </mat-toolbar>

    <!-- Segunda fila: Navegación de categorías -->
    <mat-toolbar class="nav-toolbar">
      <div class="nav-content">
        <button mat-button class="nav-button" routerLink="/">
          <mat-icon>home</mat-icon>
          <span>Inicio</span>
        </button>
        @for (category of categories; track category.route) {
          <button mat-button class="nav-button" [routerLink]="category.route">
            {{ category.label }}
          </button>
        }
      </div>
    </mat-toolbar>
  </header>

  <!-- Contenido principal -->
  <main class="content">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Conócenos</h3>
        <a href="#">Sobre Nosotros</a>
        <a href="#">Carreras</a>
        <a href="#">Relaciones con Inversionistas</a>
      </div>
      <div class="footer-section">
        <h3>Gana Dinero con Nosotros</h3>
        <a href="#">Vende en ECommerce</a>
        <a href="#">Programa de Afiliados</a>
        <a href="#">Anuncia tus Productos</a>
      </div>
      <div class="footer-section">
        <h3>Podemos Ayudarte</h3>
        <a href="#">Tu Cuenta</a>
        <a href="#">Tus Pedidos</a>
        <a href="#">Devoluciones y Reemplazos</a>
      </div>
      <div class="footer-section">
        <h3>Métodos de Pago</h3>
        <a href="#">Tarjetas de Crédito</a>
        <a href="#">Tarjetas de Débito</a>
        <a href="#">Transferencia Bancaria</a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 ECommerce - Todos los derechos reservados</p>
    </div>
  </footer>
</div>
