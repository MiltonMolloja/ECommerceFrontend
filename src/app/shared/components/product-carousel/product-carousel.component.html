<section class="product-carousel">
  <div class="carousel-header">
    <h2>{{ title }}</h2>
    <div class="nav-buttons">
      <button mat-icon-button class="nav-btn" (click)="scrollLeft()" aria-label="Anterior">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <button mat-icon-button class="nav-btn" (click)="scrollRight()" aria-label="Siguiente">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>

  <div class="carousel-track" #carouselTrack>
    @for (product of products; track trackByIndex($index)) {
      @if (isProductCard(product)) {
        <mat-card class="product-card">
          <div class="product-image-container">
            <img [src]="product.image" [alt]="product.name" class="product-image" />
          </div>
          <mat-card-content class="product-content">
            <h3 class="product-name">{{ product.name }}</h3>
            <div class="rating">
              @for (star of getStars(product.rating); track $index) {
                <mat-icon class="star" [class.filled]="star === 1">star</mat-icon>
              }
              <span class="reviews">({{ product.reviews }})</span>
            </div>
            <div class="prices">
              <span class="price">${{ product.price.toFixed(2) }}</span>
              @if (product.originalPrice) {
                <span class="original-price">${{ product.originalPrice.toFixed(2) }}</span>
              }
            </div>
            @if (product.originalPrice) {
              <div class="discount">
                Save ${{ (product.originalPrice - product.price).toFixed(2) }} ({{
                  getDiscount(product)
                }}% off)
              </div>
            }
            <button mat-raised-button class="add-to-cart">
              <mat-icon>shopping_cart</mat-icon>
              Add to Cart
            </button>
          </mat-card-content>
        </mat-card>
      } @else {
        <a [routerLink]="product.link || '/catalog'" class="product-item-simple">
          <img [src]="product.image" alt="Producto" />
        </a>
      }
    }
  </div>
</section>
